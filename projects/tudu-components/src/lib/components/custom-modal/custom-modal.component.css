/* --- Animações Principais --- */
@keyframes slideUp {
  from {
    transform: translateY(100%);
  }
  to {
    transform: translateY(0);
  }
}

@keyframes slideDown {
  from {
    transform: translateY(0);
  }
  to {
    transform: translateY(100%);
  }
}

.animate-slide-up {
  animation: slideUp 0.4s cubic-bezier(0.25, 1, 0.5, 1) forwards;
}

.animate-slide-down {
  animation: slideDown 0.4s cubic-bezier(0.25, 1, 0.5, 1) forwards;
}

/* --- Estrutura do Overlay --- */
.modal-overlay-fixed {
  position: fixed;
  inset: 0;
  background-color: rgba(0, 0, 0, 0.6) !important;
  backdrop-filter: blur(8px) !important;
  -webkit-backdrop-filter: blur(8px) !important;
  display: flex;
  align-items: flex-end;
  justify-content: center;
  z-index: 9999;
  transition: opacity 0.3s ease;
  opacity: 1;
}

/* Classe para suavizar o desaparecimento do fundo */
.overlay-hide {
  opacity: 0;
  pointer-events: none;
}

/* --- Scroll e Conteúdo Dinâmico --- */
.modal-scroll-area {
  max-height: 60vh;
  overflow-y: auto;
  overflow-x: hidden;
  transition: max-height 0.4s cubic-bezier(0.25, 1, 0.5, 1);
}

/* Expansão inteligente se houver conteúdo animado ou foco */
.modal-scroll-area:has(.animate-fade-in),
.modal-scroll-area:focus-within {
  max-height: 85vh;
}

.modal-dynamic-content {
  height: auto;
  overflow: visible !important;
  display: block;
}

/* --- Custom Scrollbar --- */
.custom-scrollbar::-webkit-scrollbar {
  width: 4px;
}

.custom-scrollbar::-webkit-scrollbar-thumb {
  background: #f1f1f1;
  border-radius: 10px;
}

.custom-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

/* --- Botões e Interação --- */
.btn-primary-custom:hover:not(:disabled) {
  filter: brightness(0.9);
  transition: filter 0.2s ease;
}

.btn-primary-custom:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* --- Estados Semânticos (Sucesso, Erro, Alerta) --- */
.modal-bg-success {
  background-color: #d1fae5 !important;
}
.modal-icon-success {
  color: #10b981 !important;
}

.modal-bg-error {
  background-color: #fee2e2 !important;
}
.modal-icon-error {
  color: #ef4444 !important;
}

.modal-bg-warning {
  background-color: #fef3c7 !important;
}
.modal-icon-warning {
  color: #f59e0b !important;
}

/* --- Responsividade (Desktop) --- */
@media (min-width: 768px) {
  .modal-overlay-fixed {
    align-items: center; /* Centraliza no desktop em vez de ser bottom-sheet */
  }

  .animate-slide-up,
  .animate-slide-down {
    border-radius: 2.5rem;
    width: 90%;
    margin-bottom: 0; /* Remove margem de bottom-sheet no desktop */
  }

  @keyframes slideUp {
    from {
      transform: scale(0.9);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  }

  @keyframes slideDown {
    from {
      transform: scale(1);
      opacity: 1;
    }
    to {
      transform: scale(0.9);
      opacity: 0;
    }
  }
}

/* --- Trava de Scroll no Body --- */
:host-context(body:has(.modal-overlay-fixed)) {
  overflow: hidden;
}
